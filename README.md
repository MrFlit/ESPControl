# ESPControl
ESPControl ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è Wi-Fi, REST API –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Wi-Fi —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∏ fallback –≤ —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞.
- REST API —Å JSON –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å–µ–Ω—Å–æ—Ä–æ–≤ –∏ –≤—ã–∑–æ–≤–∞ –¥–µ–π—Å—Ç–≤–∏–π.
- SPIFFS-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–≤–µ–±-–ø–∞–Ω–µ–ª—å).
- HTTP-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Wi-Fi –≤ —ç–Ω–µ—Ä–≥–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—É—é –ø–∞–º—è—Ç—å (Preferences).

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞
–°–∫–∞—á–∞–π—Ç–µ –∏ —Ä–∞—Å–ø–∞–∫—É–π—Ç–µ –∞—Ä—Ö–∏–≤:
- ESPControl_Full.zip
- –ü–æ–º–µ—Å—Ç–∏—Ç–µ –ø–∞–ø–∫—É ESPControl –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é: `Documents/Arduino/libraries/`
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ index.html –≤ SPIFFS (—á–µ—Ä–µ–∑ ESP32 Sketch Data Upload).

üì¶ –§–∞–π–ª—ã SPIFFS
–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç–µ index.html –≤ SPIFFS –ø–µ—Ä–µ–¥ –ø—Ä–æ—à–∏–≤–∫–æ–π.

üß∞ –¢—Ä–µ–±—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- WiFi.h
- WebServer.h
- SPIFFS.h
- Preferences.h
- ArduinoJson.h

- –ú–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏—Ö —á–µ—Ä–µ–∑ Library Manager –∏–ª–∏ –≤—Ä—É—á–Ω—É—é.

## üß© –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
```
#include <ESPControl.h>
ESPControl esp;
```
### –° —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (–∏–ª–∏ fallback –≤ —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞):
```
esp.begin();
```
### –° –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
```
esp.begin("yourSSID", "yourPassword");
```
### üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```
esp.setAuth("admin", "admin123");
```
### üß™ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ–Ω—Å–æ—Ä–æ–≤
```
esp.registerSensor("temperature", []() {
  return String(analogRead(34) * 0.1);
});
```
### ‚öôÔ∏è –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
```
esp.registerAction("reboot", []() {
  ESP.restart();
  return "OK";
});
```
–í—ã–∑—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ POST `/api/action` —Å JSON
```
{"name": "reboot"}
```

### üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –§–∞–π–ª index.html –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –∫–æ—Ä–Ω—é /.
- –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JS –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API.

> [!WARNING]
>## üì° API –û–±–∑–æ—Ä
>`GET /api/sensors`
>–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å —Ç–µ–∫—É—â–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –≤—Å–µ—Ö –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ–Ω—Å–æ—Ä–æ–≤.
>
>`POST /api/action`
>–ü—Ä–∏–Ω–∏–º–∞–µ—Ç JSON {"name": "action_name"}. –í—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

# üß† –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ —Å–∫–µ—Ç—á–∞
```
#include <ESPControl.h>
ESPControl esp;
void setup() {
  Serial.begin(115200);
  esp.setAuth("admin", "1234");
  esp.begin("MyWiFi", "password");
  esp.registerSensor("uptime", []() {
    return String(millis() / 1000) + " sec";
  });
  esp.registerAction("reboot", []() {
    ESP.restart();
    return "rebooting...";
  });
}
void loop() {
  esp.handle();
}
```

> [!IMPORTANT]
> ‚ùó –ü—Ä–∏–º–µ—á–∞–Ω–∏—è<br/>
> –í —Ä–µ–∂–∏–º–µ —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–µ—Ç—å ESPControl —Å –ø–∞—Ä–æ–ª–µ–º admin123.<br/>
> –ï—Å–ª–∏ –Ω–µ —É–¥–∞—ë—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Wi-Fi –≤ —Ç–µ—á–µ–Ω–∏–µ 10 —Å–µ–∫—É–Ω–¥ ‚Äî –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è AP-—Ä–µ–∂–∏–º.<br/>
> –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞–º–∏.<br/>
